# Agent ç»å…¸èŒƒå¼å¯¹æ¯”

> æœ¬æ–‡æ¡£æ€»ç»“äº†ä¸‰ç§ç»å…¸çš„ Agent æ¶æ„èŒƒå¼ï¼šReActã€Plan-Solveã€Reflection

## æ¦‚è§ˆå¯¹æ¯”

| èŒƒå¼ | æ ¸å¿ƒæ€æƒ³ | å·¥ä½œæµç¨‹ | é€‚ç”¨åœºæ™¯ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|-----|---------|---------|---------|------|------|
| **ReAct** | æ¨ç†+è¡ŒåŠ¨äº¤æ›¿ | Thought â†’ Action â†’ Observation â†’ å¾ªç¯ | éœ€è¦å·¥å…·è°ƒç”¨çš„æ¢ç´¢æ€§ä»»åŠ¡ | çµæ´»ã€é€‚åº”æ€§å¼º | å¯èƒ½èµ°å¼¯è·¯ |
| **Plan-Solve** | å…ˆè§„åˆ’åæ‰§è¡Œ | Plan â†’ Execute Step by Step | ç»“æ„åŒ–ã€å¤šæ­¥éª¤ä»»åŠ¡ | æ€è·¯æ¸…æ™°ã€å¯æ§ | è®¡åˆ’å¯èƒ½ä¸å‡†ç¡® |
| **Reflection** | è‡ªæˆ‘åæ€æ”¹è¿› | Execute â†’ Reflect â†’ Refine â†’ å¾ªç¯ | å¯¹å‡†ç¡®æ€§è¦æ±‚é«˜çš„ä»»åŠ¡ | è´¨é‡é«˜ã€è‡ªæˆ‘æ”¹è¿› | è€—æ—¶è¾ƒé•¿ |

## 1. ReAct (Reasoning + Acting)

### æ ¸å¿ƒæ€æƒ³

**è¾¹æƒ³è¾¹åš**ï¼šæ¨ç†ï¼ˆReasoningï¼‰å’Œè¡ŒåŠ¨ï¼ˆActingï¼‰äº¤æ›¿è¿›è¡Œï¼Œé€šè¿‡è§‚å¯Ÿç»“æœæ¥æŒ‡å¯¼ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚

### æ¶æ„å›¾

```mermaid
graph TD
    A[ç”¨æˆ·é—®é¢˜] --> B[æ„é€  Prompt]
    B --> |å·¥å…·åˆ—è¡¨ + å†å²è®°å½•| C[LLM æ€è€ƒ]
    C --> |Thought: æˆ‘éœ€è¦æœç´¢...| D[è§£æ Action]
    D --> E{Action ç±»å‹?}
    E --> |å·¥å…·è°ƒç”¨| F[æ‰§è¡Œå·¥å…·]
    E --> |Finish| J[è¿”å›æœ€ç»ˆç­”æ¡ˆ]
    F --> |è°ƒç”¨æœç´¢å·¥å…·| G[è·å– Observation]
    G --> |æœç´¢ç»“æœæ˜¯...| H[åŠ å…¥å†å²]
    H --> I{è¾¾åˆ°æœ€å¤§æ­¥æ•°?}
    I --> |å¦| B
    I --> |æ˜¯| K[æµç¨‹ç»ˆæ­¢]
    
    style A fill:#e1f5ff
    style C fill:#fff4e1
    style F fill:#ffe1e1
    style J fill:#e1ffe1
```

### å…³é”®ç»„ä»¶

```python
class ReactAgent:
    def __init__(self, llm_client, tool_executor, max_steps=5):
        self.llm_client = llm_client      # å¤§è„‘ï¼šæ€è€ƒå’Œå†³ç­–
        self.tool_executor = tool_executor # æ‰‹è„šï¼šæ‰§è¡Œå·¥å…·
        self.max_steps = max_steps         # é˜²æ­¢æ— é™å¾ªç¯
        self.history = []                  # è®°å¿†ï¼šå†å²è®°å½•
```

### å·¥ä½œæµç¨‹

1. **æ„é€  Prompt**ï¼šåŒ…å«å·¥å…·åˆ—è¡¨ã€é—®é¢˜ã€å†å²è®°å½•
2. **LLM æ€è€ƒ**ï¼šè¾“å‡º Thought å’Œ Action
3. **è§£æ Action**ï¼šæå–å·¥å…·åç§°å’Œå‚æ•°
4. **æ‰§è¡Œå·¥å…·**ï¼šè°ƒç”¨å¤–éƒ¨å·¥å…·è·å–ç»“æœ
5. **è®°å½• Observation**ï¼šå°†ç»“æœåŠ å…¥å†å²
6. **å¾ªç¯**ï¼šé‡å¤ 1-5ï¼Œç›´åˆ° Finish æˆ–è¾¾åˆ°æœ€å¤§æ­¥æ•°

### ç¤ºä¾‹è¾“å‡º

```
--- ç¬¬ 1 æ­¥ ---
æ€è€ƒï¼šæˆ‘éœ€è¦æœç´¢è‹±ä¼Ÿè¾¾æœ€æ–°çš„GPUä¿¡æ¯
è¡ŒåŠ¨ï¼šSearch[è‹±ä¼Ÿè¾¾æœ€æ–°GPU]
è§‚å¯Ÿï¼šè‹±ä¼Ÿè¾¾æœ€æ–°å‘å¸ƒäº† RTX 5090...

--- ç¬¬ 2 æ­¥ ---
æ€è€ƒï¼šæˆ‘å·²ç»è·å¾—äº†ç­”æ¡ˆ
è¡ŒåŠ¨ï¼šFinish[RTX 5090]
æœ€ç»ˆç­”æ¡ˆï¼šRTX 5090
```

### é€‚ç”¨åœºæ™¯

- éœ€è¦å¤šæ¬¡å·¥å…·è°ƒç”¨çš„ä»»åŠ¡
- æ¢ç´¢æ€§é—®é¢˜ï¼ˆä¸ç¡®å®šéœ€è¦å‡ æ­¥ï¼‰
- éœ€è¦æ ¹æ®ä¸­é—´ç»“æœè°ƒæ•´ç­–ç•¥

### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹ï¼š**
- çµæ´»æ€§é«˜ï¼Œèƒ½æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´
- é€‚åˆæ¢ç´¢æ€§ä»»åŠ¡
- å®ç°ç›¸å¯¹ç®€å•

**ç¼ºç‚¹ï¼š**
- å¯èƒ½èµ°å¼¯è·¯ï¼Œæ•ˆç‡ä¸é«˜
- ç¼ºä¹å…¨å±€è§„åˆ’
- ä¾èµ– LLM çš„å³æ—¶å†³ç­–èƒ½åŠ›

## 2. Plan-Solve (å…ˆè§„åˆ’åæ‰§è¡Œ)

### æ ¸å¿ƒæ€æƒ³

**å…ˆæƒ³ååš**ï¼šå…ˆåˆ¶å®šå®Œæ•´çš„æ‰§è¡Œè®¡åˆ’ï¼Œå†æŒ‰è®¡åˆ’é€æ­¥æ‰§è¡Œã€‚

### æ¶æ„å›¾

```mermaid
graph TD
    A[ç”¨æˆ·é—®é¢˜] --> B[é˜¶æ®µ1: Plan è§„åˆ’]
    B --> |åˆ†æé—®é¢˜| C[ç”Ÿæˆæ‰§è¡Œè®¡åˆ’]
    C --> D[è®¡åˆ’åˆ—è¡¨:<br/>1. æœç´¢ä¿¡æ¯<br/>2. åˆ†ææ•°æ®<br/>3. æ€»ç»“ç­”æ¡ˆ]
    D --> E[é˜¶æ®µ2: Solve æ‰§è¡Œ]
    E --> F[æ‰§è¡Œæ­¥éª¤1]
    F --> G[è§‚å¯Ÿç»“æœ1]
    G --> H[æ‰§è¡Œæ­¥éª¤2]
    H --> I[è§‚å¯Ÿç»“æœ2]
    I --> J[æ‰§è¡Œæ­¥éª¤3]
    J --> K{æ˜¯å¦å®Œæˆ?}
    K --> |Finish| L[è¿”å›æœ€ç»ˆç­”æ¡ˆ]
    K --> |ç»§ç»­| M[æ‰§è¡Œä¸‹ä¸€æ­¥]
    M --> K
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#fff4e1
    style E fill:#ffe1e1
    style L fill:#e1ffe1
```

### å…³é”®ç»„ä»¶

```python
class PlanSolveAgent:
    def __init__(self, llm_client, tool_executor, max_steps=10):
        self.planner = Planner(llm_client)    # è§„åˆ’å™¨ï¼šåˆ¶å®šè®¡åˆ’
        self.solver = Solver(llm_client, tool_executor)  # æ‰§è¡Œå™¨ï¼šæ‰§è¡Œè®¡åˆ’
        self.plan = []                        # è®¡åˆ’åˆ—è¡¨
        self.history = []                     # æ‰§è¡Œå†å²
```

### å·¥ä½œæµç¨‹

**é˜¶æ®µ1ï¼šPlanï¼ˆè§„åˆ’ï¼‰**
1. åˆ†æé—®é¢˜
2. ç”Ÿæˆæ­¥éª¤åˆ—è¡¨
3. è¾“å‡ºå®Œæ•´è®¡åˆ’

**é˜¶æ®µ2ï¼šSolveï¼ˆæ‰§è¡Œï¼‰**
1. æŒ‰è®¡åˆ’é€æ­¥æ‰§è¡Œ
2. æ¯æ­¥å¯ä»¥è°ƒç”¨å·¥å…·
3. è®°å½•æ‰§è¡Œç»“æœ
4. ç»§ç»­ä¸‹ä¸€æ­¥

### ç¤ºä¾‹è¾“å‡º

```
ã€é˜¶æ®µ1ï¼šåˆ¶å®šè®¡åˆ’ã€‘
ğŸ“‹ ç”Ÿæˆçš„æ‰§è¡Œè®¡åˆ’ï¼š
  1. ä½¿ç”¨æœç´¢å·¥å…·æŸ¥è¯¢è‹±ä¼Ÿè¾¾æœ€æ–°GPUä¿¡æ¯
  2. åˆ†ææœç´¢ç»“æœï¼Œæå–GPUå‹å·
  3. æ€»ç»“å¹¶è¿”å›ç­”æ¡ˆ

ã€é˜¶æ®µ2ï¼šæ‰§è¡Œè®¡åˆ’ã€‘
--- æ‰§è¡Œæ­¥éª¤ 1/3 ---
ğŸ“Œ å½“å‰æ­¥éª¤ï¼šä½¿ç”¨æœç´¢å·¥å…·æŸ¥è¯¢è‹±ä¼Ÿè¾¾æœ€æ–°GPUä¿¡æ¯
ğŸ’­ æ€è€ƒï¼šéœ€è¦æœç´¢æœ€æ–°çš„GPUå‘å¸ƒä¿¡æ¯
ğŸ”§ è¡ŒåŠ¨ï¼šSearch[è‹±ä¼Ÿè¾¾æœ€æ–°GPU 2024]
ğŸ‘ï¸ è§‚å¯Ÿï¼šè‹±ä¼Ÿè¾¾åœ¨2024å¹´å‘å¸ƒäº†RTX 5090...

--- æ‰§è¡Œæ­¥éª¤ 2/3 ---
ğŸ“Œ å½“å‰æ­¥éª¤ï¼šåˆ†ææœç´¢ç»“æœï¼Œæå–GPUå‹å·
ğŸ’­ æ€è€ƒï¼šä»æœç´¢ç»“æœä¸­æå–å‹å·
ğŸ”§ è¡ŒåŠ¨ï¼šFinish[RTX 5090]
âœ… è·å¾—æœ€ç»ˆç­”æ¡ˆ
```

### é€‚ç”¨åœºæ™¯

- ç»“æ„åŒ–ã€å¤šæ­¥éª¤ä»»åŠ¡
- éœ€è¦å…¨å±€è§„åˆ’çš„å¤æ‚é—®é¢˜
- æ­¥éª¤ç›¸å¯¹æ˜ç¡®çš„ä»»åŠ¡

### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹ï¼š**
- æ€è·¯æ¸…æ™°ï¼Œæœ‰å…¨å±€è§†è§’
- æ­¥éª¤å¯æ§ï¼Œæ˜“äºè°ƒè¯•
- é€‚åˆå¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡

**ç¼ºç‚¹ï¼š**
- è®¡åˆ’å¯èƒ½ä¸å‡†ç¡®
- çµæ´»æ€§è¾ƒå·®
- å¦‚æœè®¡åˆ’é”™è¯¯ï¼Œæ•´ä¸ªæµç¨‹å¯èƒ½å¤±è´¥

## 3. Reflection (è‡ªæˆ‘åæ€)

### æ ¸å¿ƒæ€æƒ³

**åšäº†å†æƒ³**ï¼šæ‰§è¡Œ â†’ åæ€ â†’ ä¼˜åŒ–çš„è‡ªæˆ‘æ”¹è¿›å¾ªç¯ï¼Œé€šè¿‡åé¦ˆä¸æ–­æå‡è´¨é‡ã€‚

### æ¶æ„å›¾ï¼ˆåŸå§‹è®ºæ–‡ï¼‰

![Reflection Framework](./fig/reflection_framework.png)

*å›¾ç‰‡æ¥æºï¼šReflection è®ºæ–‡æ¶æ„å›¾*

### æµç¨‹å›¾ï¼ˆå®ç°ç‰ˆæœ¬ï¼‰

```mermaid
graph TD
    A[ä»»åŠ¡] --> B[åˆå§‹æ‰§è¡Œ]
    B --> |ç”Ÿæˆåˆå§‹ä»£ç | C[è®°å½•åˆ° Memory]
    C --> D[è¿­ä»£å¾ªç¯]
    D --> E[1. åæ€]
    E --> |è¯„ä¼°ä»£ç è´¨é‡| F[2. æ£€æŸ¥]
    F --> G{æ˜¯å¦éœ€è¦æ”¹è¿›?}
    G --> |æ— éœ€æ”¹è¿›| H[è¿”å›æœ€ç»ˆä»£ç ]
    G --> |éœ€è¦æ”¹è¿›| I[3. ä¼˜åŒ–]
    I --> |ç”Ÿæˆæ”¹è¿›ç‰ˆæœ¬| J[è®°å½•åˆ° Memory]
    J --> K{è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°?}
    K --> |å¦| E
    K --> |æ˜¯| H
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style E fill:#ffe1e1
    style I fill:#ffe1e1
    style H fill:#e1ffe1
```

**Memory ç»“æ„ï¼š**

```mermaid
graph LR
    A[Memory] --> B[records åˆ—è¡¨]
    B --> C[execution è®°å½•]
    B --> D[reflection è®°å½•]
    C --> E[ä»£ç å†…å®¹]
    D --> F[åé¦ˆå†…å®¹]
    
    G[get_trajectory] --> H[æ ¼å¼åŒ–è¾“å‡º]
    H --> I["---ä¸Šä¸€è½®å°è¯•---<br/>ä»£ç <br/><br/>--- è¯„å®¡å‘˜åé¦ˆ ---<br/>åé¦ˆ"]
    
    style A fill:#e1f5ff
    style G fill:#fff4e1
```

### å…³é”®ç»„ä»¶

```python
class ReflectionAgent:
    def __init__(self, llm_client, max_iterations=3):
        self.llm_client = llm_client      # LLM å®¢æˆ·ç«¯
        self.memory = Memory()            # è®°å¿†ç³»ç»Ÿï¼šå­˜å‚¨æ‰§è¡Œå’Œåé¦ˆ
        self.max_iterations = max_iterations  # æœ€å¤§è¿­ä»£æ¬¡æ•°
```

**Memory ç»“æ„ï¼š**
```python
class Memory:
    def __init__(self):
        self.records = []  # å­˜å‚¨ execution å’Œ reflection è®°å½•
    
    def get_trajectory(self):
        """æ ¼å¼åŒ–å†å²è®°å½•ä¸º Prompt"""
        # è¿”å›ï¼š
        # ---ä¸Šä¸€è½®å°è¯•---
        # [ä»£ç ]
        # 
        # --- è¯„å®¡å‘˜åé¦ˆ ---
        # [åé¦ˆ]
```

### å·¥ä½œæµç¨‹

1. **åˆå§‹æ‰§è¡Œ**ï¼šç”Ÿæˆåˆå§‹ä»£ç 
2. **åæ€**ï¼šè¯„ä¼°ä»£ç è´¨é‡ï¼Œæ‰¾å‡ºé—®é¢˜
3. **æ£€æŸ¥**ï¼šåˆ¤æ–­æ˜¯å¦éœ€è¦æ”¹è¿›
4. **ä¼˜åŒ–**ï¼šåŸºäºåé¦ˆç”Ÿæˆæ”¹è¿›ç‰ˆæœ¬
5. **å¾ªç¯**ï¼šé‡å¤ 2-4ï¼Œç›´åˆ°"æ— éœ€æ”¹è¿›"æˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°

### ç¤ºä¾‹è¾“å‡º

```
--- å¼€å§‹å¤„ç†ä»»åŠ¡ ---
ä»»åŠ¡: ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œåˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦ä¸ºè´¨æ•°

--- æ­£åœ¨è¿›è¡Œåˆå§‹å°è¯• ---
åˆå§‹ä»£ç :
def is_prime(n):
    for i in range(2, n):
        if n % i == 0:
            return False
    return True

--- ç¬¬ 1/3 è½®è¿­ä»£ ---
-> æ­£åœ¨è¿›è¡Œåæ€...
åé¦ˆ: ç®—æ³•æ•ˆç‡ä½ï¼Œæ—¶é—´å¤æ‚åº¦O(n)ï¼Œå»ºè®®ä¼˜åŒ–åˆ°O(âˆšn)

-> æ­£åœ¨è¿›è¡Œä¼˜åŒ–...
ä¼˜åŒ–åä»£ç :
def is_prime(n):
    if n < 2:
        return False
    for i in range(2, int(n**0.5) + 1):
        if n % i == 0:
            return False
    return True

--- ç¬¬ 2/3 è½®è¿­ä»£ ---
-> æ­£åœ¨è¿›è¡Œåæ€...
åé¦ˆ: æ— éœ€æ”¹è¿›

âœ… åæ€è®¤ä¸ºä»£ç å·²æ— éœ€æ”¹è¿›ï¼Œä»»åŠ¡å®Œæˆã€‚
```

### é€‚ç”¨åœºæ™¯

- å¯¹å‡†ç¡®æ€§ã€è´¨é‡è¦æ±‚é«˜çš„ä»»åŠ¡
- ä»£ç ç”Ÿæˆã€æ–‡æœ¬ä¼˜åŒ–ç­‰éœ€è¦è¿­ä»£æ”¹è¿›çš„ä»»åŠ¡
- æœ‰æ˜ç¡®è¯„ä¼°æ ‡å‡†çš„ä»»åŠ¡

### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹ï¼š**
- è¾“å‡ºè´¨é‡é«˜
- è‡ªæˆ‘æ”¹è¿›èƒ½åŠ›å¼º
- é€‚åˆéœ€è¦ç²¾é›•ç»†ç¢çš„ä»»åŠ¡

**ç¼ºç‚¹ï¼š**
- è€—æ—¶è¾ƒé•¿ï¼ˆå¤šæ¬¡ LLM è°ƒç”¨ï¼‰
- éœ€è¦å¥½çš„è¯„ä¼°æ ‡å‡†
- å¯èƒ½é™·å…¥å±€éƒ¨æœ€ä¼˜

## ä¸‰ç§èŒƒå¼çš„å¯¹æ¯”æ€»ç»“

### æ•´ä½“æµç¨‹å¯¹æ¯”

```mermaid
graph TB
    subgraph ReAct["ReAct: è¾¹æƒ³è¾¹åš"]
        R1[é—®é¢˜] --> R2[æ€è€ƒ]
        R2 --> R3[è¡ŒåŠ¨]
        R3 --> R4[è§‚å¯Ÿ]
        R4 --> R2
        R4 --> R5[å®Œæˆ]
    end
    
    subgraph PlanSolve["Plan-Solve: å…ˆæƒ³ååš"]
        P1[é—®é¢˜] --> P2[åˆ¶å®šè®¡åˆ’]
        P2 --> P3[æ‰§è¡Œæ­¥éª¤1]
        P3 --> P4[æ‰§è¡Œæ­¥éª¤2]
        P4 --> P5[æ‰§è¡Œæ­¥éª¤3]
        P5 --> P6[å®Œæˆ]
    end
    
    subgraph Reflection["Reflection: åšäº†å†æƒ³"]
        F1[ä»»åŠ¡] --> F2[åˆå§‹æ‰§è¡Œ]
        F2 --> F3[åæ€]
        F3 --> F4[ä¼˜åŒ–]
        F4 --> F3
        F4 --> F5[å®Œæˆ]
    end
    
    style R2 fill:#fff4e1
    style R3 fill:#ffe1e1
    style P2 fill:#fff4e1
    style P3 fill:#ffe1e1
    style F3 fill:#ffe1e1
    style F4 fill:#fff4e1
```

### å†³ç­–æ–¹å¼

| èŒƒå¼ | å†³ç­–æ–¹å¼ | ç±»æ¯” |
|-----|---------|------|
| ReAct | å³æ—¶å†³ç­– | è¾¹èµ°è¾¹çœ‹çš„æ¢é™©å®¶ |
| Plan-Solve | é¢„å…ˆè§„åˆ’ | æŒ‰åœ°å›¾è¡Œèµ°çš„æ—…è¡Œè€… |
| Reflection | äº‹ååæ€ | ä¸æ–­ä¿®æ”¹çš„ä½œå®¶ |

### é€‚ç”¨ä»»åŠ¡ç±»å‹

```
æ¢ç´¢æ€§ä»»åŠ¡ â”€â”€â”€â”€â”€â”€â”€â”€â†’ ReAct
    â†“
ç»“æ„åŒ–ä»»åŠ¡ â”€â”€â”€â”€â”€â”€â”€â”€â†’ Plan-Solve
    â†“
é«˜è´¨é‡ä»»åŠ¡ â”€â”€â”€â”€â”€â”€â”€â”€â†’ Reflection
```

### æ•ˆç‡ vs è´¨é‡

```
æ•ˆç‡é«˜ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ è´¨é‡é«˜
  â†‘                           â†‘
ReAct                    Reflection
  â†‘                           â†‘
  â””â”€â”€â”€â”€â”€â”€ Plan-Solve â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         (å¹³è¡¡ç‚¹)
```

### å®ç°å¤æ‚åº¦

```
ç®€å• â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ å¤æ‚
  â†‘                        â†‘
ReAct                 Reflection
  â†‘                        â†‘
  â””â”€â”€â”€â”€ Plan-Solve â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¦‚ä½•é€‰æ‹©ï¼Ÿ

### å†³ç­–æµç¨‹å›¾

```mermaid
graph TD
    A[å¼€å§‹é€‰æ‹© Agent èŒƒå¼] --> B{ä»»åŠ¡ç±»å‹?}
    B --> |æ¢ç´¢æ€§ä»»åŠ¡| C{éœ€è¦å·¥å…·è°ƒç”¨?}
    B --> |ç»“æ„åŒ–ä»»åŠ¡| D{æ­¥éª¤æ˜¯å¦æ˜ç¡®?}
    B --> |è´¨é‡è¦æ±‚é«˜| E[Reflection]
    
    C --> |æ˜¯| F[ReAct]
    C --> |å¦| G[è€ƒè™‘å…¶ä»–æ–¹æ¡ˆ]
    
    D --> |æ˜¯| H[Plan-Solve]
    D --> |å¦| I[ReAct]
    
    style F fill:#e1ffe1
    style H fill:#e1ffe1
    style E fill:#e1ffe1
```

### é€‰æ‹© ReAct å½“ï¼š
- âœ… éœ€è¦å¤šæ¬¡å·¥å…·è°ƒç”¨
- âœ… ä»»åŠ¡æ­¥éª¤ä¸ç¡®å®š
- âœ… éœ€è¦æ ¹æ®ä¸­é—´ç»“æœè°ƒæ•´ç­–ç•¥
- âœ… è¿½æ±‚çµæ´»æ€§

### é€‰æ‹© Plan-Solve å½“ï¼š
- âœ… ä»»åŠ¡æ­¥éª¤ç›¸å¯¹æ˜ç¡®
- âœ… éœ€è¦å…¨å±€è§„åˆ’
- âœ… å¤šæ­¥éª¤å¤æ‚ä»»åŠ¡
- âœ… è¿½æ±‚å¯æ§æ€§

### é€‰æ‹© Reflection å½“ï¼š
- âœ… å¯¹è´¨é‡è¦æ±‚é«˜
- âœ… éœ€è¦è¿­ä»£æ”¹è¿›
- âœ… æœ‰æ˜ç¡®çš„è¯„ä¼°æ ‡å‡†
- âœ… è¿½æ±‚å‡†ç¡®æ€§

## æ··åˆä½¿ç”¨

å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥ç»„åˆä½¿ç”¨ï¼š

### ReAct + Reflection
```python
# ç”¨ ReAct æ¢ç´¢è§£å†³æ–¹æ¡ˆ
initial_solution = react_agent.run(question)

# ç”¨ Reflection ä¼˜åŒ–è´¨é‡
final_solution = reflection_agent.run(initial_solution)
```

### Plan-Solve + Reflection
```python
# ç”¨ Plan-Solve æ‰§è¡Œè®¡åˆ’
plan_result = plan_solve_agent.run(question)

# ç”¨ Reflection æ£€æŸ¥å’Œæ”¹è¿›
final_result = reflection_agent.refine(plan_result)
```

## æ ¸å¿ƒä»£ç å¯¹æ¯”

### ReAct æ ¸å¿ƒå¾ªç¯
```python
while current_step < max_steps:
    # 1. æ„é€  Promptï¼ˆåŒ…å«å†å²ï¼‰
    prompt = build_prompt(tools, question, history)
    
    # 2. LLM æ€è€ƒ
    response = llm(prompt)
    
    # 3. è§£æå¹¶æ‰§è¡Œ Action
    action = parse_action(response)
    observation = execute_tool(action)
    
    # 4. åŠ å…¥å†å²
    history.append(f"Action: {action}")
    history.append(f"Observation: {observation}")
```

### Plan-Solve æ ¸å¿ƒæµç¨‹
```python
# é˜¶æ®µ1ï¼šè§„åˆ’
plan = planner.plan(question, tools)

# é˜¶æ®µ2ï¼šæ‰§è¡Œ
for step in plan:
    thought, action, observation = solver.solve_step(
        question, plan, step, history
    )
    history.append(observation)
```

### Reflection æ ¸å¿ƒå¾ªç¯
```python
# åˆå§‹æ‰§è¡Œ
code = llm(initial_prompt)
memory.add_record("execution", code)

# è¿­ä»£ä¼˜åŒ–
for i in range(max_iterations):
    # åæ€
    feedback = llm(reflection_prompt)
    memory.add_record("reflection", feedback)
    
    # æ£€æŸ¥
    if "æ— éœ€æ”¹è¿›" in feedback:
        break
    
    # ä¼˜åŒ–
    trajectory = memory.get_trajectory()
    improved_code = llm(refine_prompt + trajectory)
    memory.add_record("execution", improved_code)
```

## å‚è€ƒèµ„æ–™

- [ReAct è®ºæ–‡](https://arxiv.org/abs/2210.03629) - Synergizing Reasoning and Acting in Language Models
- [Plan-and-Solve è®ºæ–‡](https://arxiv.org/abs/2305.04091) - Plan-and-Solve Prompting
- [Reflection è®ºæ–‡](https://arxiv.org/abs/2303.11366) - Reflexion: Language Agents with Verbal Reinforcement Learning
- [Hello-Agents æ•™ç¨‹](https://github.com/datawhalechina/hello-agents) - Datawhale æ™ºèƒ½ä½“å­¦ä¹ æ•™ç¨‹

---

**æœ€åæ›´æ–°ï¼š** 2026-01-19

**ç›¸å…³æ–‡æ¡£ï¼š**
- [Agent æœ¬è´¨ç†è§£](../../tips/02-Agentæœ¬è´¨ç†è§£.md)
- [Prompt å·¥ç¨‹æŠ€å·§](../../tips/01-Promptå·¥ç¨‹æŠ€å·§.md)
